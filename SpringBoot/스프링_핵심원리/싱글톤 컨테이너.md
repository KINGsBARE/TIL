# 싱글톤 컨테이너
## 목차
- 앱 애플리케이션과 싱글톤
- 싱글톤 패턴
- 실글톤 컨테이너
- 싱글톤 방식의 주의점
- @Configuration과 싱글톤
- @Configuration과 바이트코드 조작의 마법

<br>
<br>
<br>

# 📌 앱 애플리케이션과 싱글톤

- 스프링 없는 순수 DI컨 테이너인 AppConfig는 **요청을 할 때 마다 객체를 새로 생성**한다.
- 즉 고객 트래픽이 초당 100이나오면 100개의 객체가 생성되고 소멸된다 => **메모리 낭비가 심하다**.
- 따라서 객체가 1개 생성되고 , 공유하도록 보다 효휼적인 방법을사용한다. => **싱글톤 패턴** 
## 스프링 없는 순수 DI컨테이너 예제
~~~java
package singleton;

import hello.core.AppConfig;
import hello.core.member.MemberService;


import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

public class SingletonTest {

    @Test
    @DisplayName("스프링 없는 순수 DI 컨테이너")

    void future(){

        AppConfig appConfig = new AppConfig();
        // 스프링 없는 순수 DI 컨테이너 생성
        MemberService memberService1 = appConfig.memberService();
        MemberService memberService2 = appConfig.memberService();
        //memberService() 두번 요청

        System.out.println("memberService1 = " + memberService1);
        System.out.println("memberService2 = " + memberService2);
        //메모리 참조값이 다른지 확인
       /* memberService1 = hello.core.member.MemberServiceImp@c0c2f8d
          memberService2 = hello.core.member.MemberServiceImp@305b7c14*/

        Assertions.assertThat(memberService1).isNotSameAs(memberService2);
        //memberService1과 memberService2가 다른 참조값인지 확인 -> 통과
        //즉 순수 DI 자바 컨테이너는 호출 할 때마다 새로운 객체를 생성한다. ->비효율적 = 메모리낭비 심함 ->해결방안 객체1개생성 하고 공유 ->싱글톤 패턴
        }

}
 

~~~
> .isequalsTo() : 객체안의 내용 비교<br>
.isSameAs() : 주소값 비교

<br>
<br>
<br>
<br>

# 📌 싱글톤 패턴
- 싱글톤 패턴은 클래스의 인스턴스가 딱 1개만 생성되는것을 보장하는 디자인패턴이다.
- 그래서 객체 인스턴스를 2개 이상 생성하지 못하도록 막아야한다.-> private 생성자를 사용해서 외부에서 임의로 new 키워드를 사용하지 못하도록 막아야 한다.

> 디자인 패턴이란? <br>
여기서 디자인 패턴에 design은 '설계'라는 뜻으로 설계패턴이라는 뜻이다.<br>
개발자들이 여러가지 프록래밍 할때 여러가지 에러사항을 고민하고 처리하면서 문제의 다양한 해결책 중에 많은 사람들이 인정하고 사용하는 표준 설계패턴을 바로 디자인 패턴이라고 한다.<br>
즉 자주 사용하는 설계패턴을 정형화해서 이를 유형별로 가장 최적의 방법으로 개발 할 수 있도록 패턴들을 만들어 두었다.<br>
**싱글톤은 여러가지 정형화된 디자인패턴중 한가지이다**.


<br>
<br>
<br>
<br>

# 📌 싱글톤 컨테이너

<br>
<br>
<br>
<br>

# 📌 싱글톤 방식의 주의점

<br>
<br>
<br>
<br>

# 📌 @Configuration과 싱글톤

<br>
<br>
<br>
<br>

# 📌 @Configuration과 바이트코드 조작의 마법