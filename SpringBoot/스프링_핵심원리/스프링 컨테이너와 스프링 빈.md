# 목차
- 스프링 컨테이너 생성
- 컨테이너에 등록된 모든 빈 조회
- 스프링 빈 조회 - 기본
- 스프링 빈 조회 - 동일한 타입이 둘 이상
- 스프링 빈 조회 - 상속 관계
- BeanFactory와 ApplicationContest
- 다양한 설정 형식 지원 - 자바 코드,XML
- 스프링 빈 설정 메타 정보 - BeanDefinition

<br>
<br>
<br>

# 스프링 컨테이너 생성

~~~java
// 스프링 컨테이너 생성
ApplicationContext ac //인터페이스
 = new AnnotationConfigApplicationContext(AppConfig.class); //구현체(다형성 적용)
~~~
- ApplicationContext를 스프링 컨테이너라고 한다.
- ApplicationContext는 인터페이스이다.
- 스프링 컨테이너는 애노테이션 기반 자바 설정 클래스로 만들 수 있고, XML을 기반으로도 자바 설정 클래스를 만들 수 있지만 지금은 잘 안쓰인다고 한다.
- 아래 코드처럼 AppConfig.class를 사용했던 방식이 애노테이션 기반의 자바 설정 클래스로 스프링 컨테이너를 만든것이다.
~~~java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService(){
        return new MemberServiceImp(memberRepository());
    }

 ...
~~~
> 스프링컨테이너는 BeanFactory,ApplicationContext로 구분해서 말하지만 BeanFactory를 직접사용하는 경우는 거의 없으므로 일반적으로 ApplicatrionContext를 스프링 컨테이너라고 말한다.

<br>
<br>
<br>

## 1. 스프링 컨테이너 생성
![스프링 컨테이너 생성](https://user-images.githubusercontent.com/89888075/165224758-2c6e724c-f3fe-4f0c-8e3d-859e262f491e.png)
- 스프링컨테이너의 구현체인 AnnotationConfigApplicationContext로 스프링 컨테이너 생성
- 스프링 컨테이너를 생성할 때는 구성 정보를 파라미터로 넣주어야해서 AppConfig.class를 구성정보로 지정

<br>

## 2. 스프링 빈 등록
![스프링 빈 등록](https://user-images.githubusercontent.com/89888075/165226094-0d320a90-360c-4dac-ad8d-a675cbf6b226.png)

- 스프링 컨테이너는 파라미터로 넘어온 AppConfig.class의 정보를 사용해서 스프링 빈을 등록 한다.

빈 이름
- 빈 이름은 메서드 이름을 사용한다.
- 빈 이름을 직접 부여할 수 도 있다.
   - @Bean(name="새로 등록할 이름")

<br>

## 3. 스프링 빈 의존관계 설정 - 준비
![스프링 빈 의존관계 설정 - 준비](https://user-images.githubusercontent.com/89888075/165228574-af0fbc7d-7384-43cc-a8f7-5bacfe5773fb.png)

<br>

## 4. 스프링 빈 의존관계 설정 - 완료
![스프링 빈 의존관계 설정 -완료](https://user-images.githubusercontent.com/89888075/165228578-f0fe7886-2bb3-46d0-b0ed-4759240b6236.png)

- 스프링 컨테이너는 설정 정보를 참고해서 의존관계를 주입(DI)한다.
- 단순히 자바 코드를 호출하는 것 같지만, 차이가있다. 이 차이는 뒷 부분 싱글톤 컨테이너에서 설명이 있다고 한다.

<br>

### 정리
- 스프링 컨테이너를 생성하면 설정(구성)정보인 AppConfig를 참고해서 스프링 빈을 등록하고, 의존관계도 설정해 준다.
<br>
<br>
<br>

# 컨테이너에 등록된 모든 빈 조회
 스프링 컨테이너에 실제 스프링 빈들이 잘 등록 되었는지 확인해 보기.
<br>
<br>
<br>

# 스프링 빈 조회 - 기본
~~~java
package hello.core.beanfind;

import hello.core.AppConfig;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class ApplicationContextInfoTest {

    //AppConfig.class 의 정보가 담겨있는 스프링 컨테이너 생성
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("모든 빈 출력하기")
    void findAllBean() {

        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        // getBeanDefinitionNames()으로 빈 객체이름들을 모두 beanDefinitionNames에 담음

        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            //beanDefinitionName의 객체들을 하나하나 Object타입의 변수에 담음
            System.out.println("Name = " + beanDefinitionName + "  ,object = " + bean);
        }
    }
        @Test
        @DisplayName("애플리케이션 빈 출력하기")
        void findApplicationBean(){
            String[] beanDefinitionNames = ac.getBeanDefinitionNames();
            for (String beanDefinitionName : beanDefinitionNames) {
                BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

                //Role ROLE_APPLICATION : 직접 등록한 애플리케이션 빈
                //Role ROLE_INFRASTRUCTURE : 스프링이 내부에서 사용하는 빈
                if(beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION){
                    Object bean = ac.getBean(beanDefinitionName);
                    System.out.println("name= " + beanDefinitionName + ", object= "+bean);
                }

        }
    }
}

~~~
- 모든 빈 출력하기
  - 실행화면 스프링에 등록된 모든 빈 정보를 출력 할 수 있다.
- 애플리케이션 빈 출력하기
  - 스프링이 내부에서 사용하는 빈 제외 내가 등록한 빈만 보기
  - Role ROLE_APPLICATION을 이용해서 직접 등록한 애플리케이션 빈일때만 Object 변수에 담기
<br>
<br>
<br>

# 스프링 빈 조회 - 동일한 타입이 둘 이상

<br>
<br>
<br>

# 스프링 빈 조회 - 상속 관계

<br>
<br>
<br>

# BeanFactory와 ApplicationContest

<br>
<br>
<br>

# 다양한 설정 형식 지원 - 자바 코드,XML

<br>
<br>
<br>

# 스프링 빈 설정 메타 정보 - BeanDefinition

<br>
<br>
<br>

>Ref 김영한님 스프링 핵심 원리 기본편